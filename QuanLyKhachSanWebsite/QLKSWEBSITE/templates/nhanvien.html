{% extends "Layout/base.html" %}
{%block content%}
<div class="container mt-4">
    <!-- Tab navigation -->
    <ul class="nav nav-tabs">
        <li class="nav-item">
            <a class="nav-link active" href="/nhanvien?id=tatca">Tất cả</a>
        </li>
        {% for loai in loaiPhong %}
        <li class="nav-item">
            <a class="nav-link active" href="/nhanvien?id={{loai.id}}">{{loai.tenLoaiPhong}}</a>
        </li>
        {% endfor %}
    </ul>

    <!-- Room cards -->
    {% if id == "tatca" %}
    <div class="row mt-4">
        {% for p, phieu in phongDangSuDung %}
        <!-- Room 1 -->
        <div class="col-md-3 mb-4">
            <div class="room-card bg-warning">
                <div class="room-header">
                    <i class="bi bi-people-fill"></i>
                    <i class="bi bi-calendar-event"></i>
                </div>
                <h5 class="mt-3">Phòng {{p.id}}</h5>
                <p>
                    <label>Ngày nhận phòng:</label>
                    <i class="bi bi-calendar-check"></i> {{phieu.ngayNhanPhong}}<br>
                    <label>Ngày trả phòng:</label>
                    <i class="bi bi-calendar-check"></i> {{phieu.ngayTraPhong}}<br>
                </p>
                <h5 class="mt-3">Trạng thái: Đang sử dụng</h5>
                <form>
                    <input type="hidden" name="idPhieuThuePhong" value="{{phieu.id}}">
                    <button type="submit">Trả phòng</button>
                </form>
            </div>
        </div>
        <!-- Add more cards here -->
        {% endfor %}
        {% for p, phieu in phongDangSuDung %}
        {% for ph in phong %}
        {% if  ph.id|int != p.id|int %}
        <div class="col-md-3 mb-4">
            <div class="room-card bg-primary"> <!-- Đổi bg-warning thành bg-primary -->
                <div class="room-header">
                    <i class="bi bi-people-fill"></i>
                    <i class="bi bi-calendar-event"></i>
                </div>
                <h5 class="mt-3">Phòng {{ph.id}}</h5>
                <h5 class="mt-3">Trạng thái: Trống</h5>
            </div>
        </div>
        {% endif %}
        {% endfor %}
        {% endfor %}
    </div>
    {% else %}
    <div class="row mt-4">
        {% for p, phieu in phongDangSuDung %}
        {% if p.idLoaiPhong == id|int %}
        <!-- Room 1 -->
        <div class="col-md-3 mb-4">
            <div class="room-card bg-warning">
                <div class="room-header">
                    <i class="bi bi-people-fill"></i>
                    <i class="bi bi-calendar-event"></i>
                </div>
                <h5 class="mt-3">Phòng {{p.id}}</h5>
                <p>
                    <label>Ngày nhận phòng:</label>
                    <i class="bi bi-calendar-check"></i> {{phieu.ngayNhanPhong}}<br>
                    <label>Ngày trả phòng:</label>
                    <i class="bi bi-calendar-check"></i> {{phieu.ngayTraPhong}}<br>
                </p>
                <h5 class="mt-3">Trạng thái: Đang sử dụng</h5>
                <form>
                    <input type="hidden" name="idPhieuThuePhong" value="{{phieu.id}}">
                    <button type="submit">Trả phòng</button>
                </form>
            </div>
        </div>
        <!-- Add more cards here -->
        {% endif %}
        {% endfor %}
        {% for p, phieu in phongDangSuDung %}
        {% for phh in phong %}
        {% if phh.id|int != p.id|int and phh.idLoaiPhong == id|int %}
        <div class="col-md-3 mb-4">
            <div class="room-card bg-primary"> <!-- Đổi bg-warning thành bg-primary -->
                <div class="room-header">
                    <i class="bi bi-people-fill"></i>
                    <i class="bi bi-calendar-event"></i>
                </div>
                <h5 class="mt-3">Phòng {{phh.id}}</h5>
                <h5 class="mt-3">Trạng thái: Trống</h5>
            </div>
        </div>
        {% endif %}
        {% endfor %}
        {% endfor %}
    </div>
    {% endif %}
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
{% endblock %}
